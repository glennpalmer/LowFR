---
title: "Run FIN Simulations"
output: pdf_document
date: "2023-10-25"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(miceadds)
library(infinitefactor)
source.all(path="R")
source("R/infinitefactor/R/interactionDL.R")
```

## Scenario 1

```{r}
# simulate data (default dimensions set in simulate_scenario fucntions)
data1 <- simulate_scenario1()

# fit the FIN model
fin_m1 <- fit_FIN(data1$y_obs, data1$X_obs)
```

```{r}
# summarize model accuracy
fin_acc <- summarize_accuracy_FIN(data1, fin_m1)

# summarize ESS
fin_diagnostics <- summarize_mixing_FIN(fin_m1)
```

```{r}
# run full simulation
seed_list <- 1:50
scenario <- 3
for (i in seed_list) {
  full_sim_save <- run_sim_FIN(scenario=scenario,
              save_output=TRUE,
              path=paste0("simulations/FIN/scenario", scenario, "/"),
              datagen_seed=i)
}
```


